{% extends "PM/base.html" %}
{% load bootstrap3 %}

{% block header %}
<h1>Projects</h1>
{% endblock header %}

{% block content %}

<p>
<a style="float:left;" class="btn btn-primary" href="{% url 'PM:new_project' %}" role="button">Add new project</a>
<form style="" class="form-inline mt-2 mt-md-0" action="{% url 'PM:search' %}" method='get'>
  {% csrf_token %}
  <input name="search_key" class="form-control mr-sm-2" type="text" placeholder="Project Name" aria-label="Search" required>
  <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
</form>
</p>

<table>
  <tr>
    <td>Project Name</td>
    <td>Author</td>
    <td>Deadline</td>
    <td>State</td>
    <td>Date_added|Date_finished</td>
    <td>Operation</td>
  </tr>
{% for project in projects %}
  <tr>
    <td>{{ project.name }}</td>
    <td>{{ project.author }}</td>
    <td>{{ project.year }}/{{ project.month }}/{{ project.day }}</td>
    <td>{{ project.state }}</td>
    <td>{{ project.finished_time|date:'M d, Y H:i' }}</td>
    
    <td><a href="{% url 'PM:finished' project.id %}">finished</a>/<a href="{% url 'PM:renew_project' project.id %}">renew</a>/<a href="{% url 'PM:del_project' project.id %}">delete</a></td>
    <td>
    <script language="javascript">
      function del(){
        if(confirm("This project will be deleted, are you sure?")){
          window.location.href="{% url 'PM:del_project' project.id %}";
          }
        }
      function finished(){
        window.location.href="{% url 'PM:finished' project.id %}";
      }
    </script>
    <form>
    <input type="button" value="delete" onclick="del()">
    <input type="button" value="finished" onclick="finished()">
    </form>
    </td>
  </tr>
{% endfor %}
</table>


<h2>Projects</h2>
<div class="table-responsive">
  <table class="table table-striped table-sm">
    <thead>
      <tr>
        <th>name</th>
        <th>author</th>
        <th>deadline</th>
        <th>state</th>
        <th>date_added</th>
        <th>date_finished</th>
        <th>operation</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>spring</td>
      </tr>
      <tr>
      </tr>
    </tbody>
  </table>
</div>

{% endblock content %}
